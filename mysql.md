
# Real My SQL 6장 실행계획

## **6.3 MySQL의 주요 처리방식**
성능에 미치는 영향이 큰 실행 계획과 연관이 있는 단위 작업

- 풀 테이블 스캔 / 스토리지 엔진
- ORDER BY 처리(Using filesort) / MYSQL엔진
- GROUP BY 처리 / MYSQL엔진
- DISTINCT 처리 / MYSQL엔진
- 임시 테이블(Using temporary) / MYSQL엔진
- 테이블 조인 / MYSQL엔진

> MYSQL에서 부가적으로 처리하는 작업은 대부분 성능에 미치는 영향력이 큰데, 안타깝게도 모두 쿼리의 성능을 저하시키는 요인들이다.



## 풀 테이블 스캔

인덱스를 사용하지 않고 테이블의 데이터를 처음부터 끝까지 읽어 요청된 작업을 처리하는 작업

## ORDER BY 처리 (Using filesort)

 - 소트버퍼(Sort buffter)
 MySQL은 정렬을 수행하기 위해 별도의 메모리 공간을 할당 받아서 사용하는데, 이 메모리 공간을 소트 버퍼라고 한다.
 
 - 정렬 알고리즘
   레코드를 정렬할 때, 레코드 전체를 소트버퍼에 담을지 또는 정렬 기준 컬럼만 소트 버퍼에 담을지에 따라 2가지 정렬 알고리즘으로 나눠볼 수 있다.
	 -	싱글 패스 알고리즘
	    소트 버퍼에 정렬 기준 컬럼을 포함해 SELECT 되는 컬럼 전부를 담아서 정렬을 수행하는 방법이다. 정렬 대상 레코드의 크기나 건수가 상당히 작은경우 빠른 성능을 보인다.
	    
	 -	투 패스 알고리즘
	    정렬 대상 컬럼과 프라이머리 키값만을 소트버퍼에 담아서 정렬을 수행하고 정렬된 순서대로 다시 프라이머리 키로 테이블을 읽어서 SELECT 할 컬럼을 가져오는 알고리즘이다. 정렬 대상 레코드의 크기나 건수가 상당히 많은 경우에 효율적이다.



**정렬의 처리방식**
**1. 인덱스를 이용한 정렬**  --> 스트리밍방식
**2. 드라이빙 테이블만 정렬** --> 버퍼링방식
**3. 임시 테이블을 이용한 정렬** --> 버퍼링방식

## 쿼리가 처리되는 방식
1. 스트리밍(Streaming)방식
	서버에서 처리할 데이터 수와 관계없이 조건에 일치하는 레코드를 바로바로 클라이언트로 전송해주는 방식  
  
2. 버퍼링(Buffering)방식
	ORDER BY나 GROUP BY 때문에 스트리밍할 수 없고, WHERE 조건에 맞는 결과를 가져온 후 가공하여 클라이언트로 돌려주는 방식이다.  
 
  

## Group BY 처리

**GROUP BY의 처리방식**

**1. 인덱스를 사용하는 경우**  	

	1. 인덱스 스캔을 이용하는 Group BY(타이트 인덱스 스캔) 
	2. 루스(loose) 인덱스 스캔을 이용하는 Group BY
**2. 인덱스를 사용하지 못하는 경우** 
	
	1.	임시 테이블을 사용하는 Group BY

